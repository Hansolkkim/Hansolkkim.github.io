<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="CGAffineTransform에 대해" /><meta property="og:locale" content="ko" /><meta name="description" content="계기" /><meta property="og:description" content="계기" /><link rel="canonical" href="/posts/CGAffineTransform/" /><meta property="og:url" content="/posts/CGAffineTransform/" /><meta property="og:site_name" content="SoliOS" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-08-01T22:43:10+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="CGAffineTransform에 대해" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="nvd2iqjDnkZKbkhCEZILzHaLouk7d4p92EArPFodwzo" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-11-04T16:13:49+09:00","datePublished":"2022-08-01T22:43:10+09:00","description":"계기","headline":"CGAffineTransform에 대해","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/CGAffineTransform/"},"url":"/posts/CGAffineTransform/"}</script><title>CGAffineTransform에 대해 | SoliOS</title><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://user-images.githubusercontent.com/92504186/175757408-12d2c887-5ba2-4c28-8f9c-80612bb6dbf4.JPEG" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">SoliOS</a></div><div class="site-subtitle font-italic">iOS 개발자를 꿈꿉니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Hansolkkim" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hskim6521','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>CGAffineTransform에 대해</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>CGAffineTransform에 대해</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1659361390" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Aug 1, 2022 </em> </span> <span> Updated <em class="" data-ts="1667546029" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Nov 4, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> Sol </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1236 words"> <em>6 min</em> read</span></div></div></div><div class="post-content"><h2 id="계기"><span class="mr-2">계기</span><a href="#계기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>토이 프로젝트 진행하면서 Custom View의 이동 방법에 대해 공부하다가 <code class="language-plaintext highlighter-rouge">CGAffineTransform</code>에 대해 새로 알게 되었습니다.</p><p>View를 직접 이동시키기위해서 Constraints를 업데이트하는 방법도 있었고, CGAffineTransform을 이용해 View가 보이는 위치를 바꿔주는 방법도 있었는데, 이번 포스팅에서는 CGAffineTransform에 대해 정리해보고자 합니다.</p><h2 id="affine-transform"><span class="mr-2">Affine Transform?</span><a href="#affine-transform" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>아핀 변환은 점, 직선, 평면을 보존하는 선형 매핑 방법입니다. (여기서 “보존”이라는 단어의 의미는, 아핀 변환 이후에도 평행한 선들은 평행한 상태로 유지되는 등의 상태를 말하는 것 같습니다.)</p><p><code class="language-plaintext highlighter-rouge">CGAffineTransform</code>에서 다룰 아핀 변환은 아래와 같은 변환이 있습니다.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">아핀 변환<th style="text-align: center">예<th>변환 행렬<th>설명<tbody><tr><td style="text-align: center">평행이동<td style="text-align: center"><img data-src="https://raw.githubusercontent.com/Hansolkkim/Image-Upload/forUpload/img/202211021351991.jpg" alt="SS2022-11-02PM01.51.37" width="70%;" data-proofer-ignore><td>\(\begin{bmatrix}1&amp;0&amp;0\\0&amp;1&amp;0\\t_x&amp;t_y&amp;1\\ \end{bmatrix}\)<td>t<sub>x</sub>는 x축 방향 변위를, <br />t<sub>y</sub>는 y축 방향 변위를 나타냄<tr><td style="text-align: center">스케일링<td style="text-align: center"><img data-src="https://raw.githubusercontent.com/Hansolkkim/Image-Upload/forUpload/img/202211021350545.jpg" alt="SS2022-11-02PM01.50.12" width="70%;" data-proofer-ignore><td>\(\begin{bmatrix}s_x&amp;0&amp;0\\0&amp;s_y&amp;0\\0&amp;0&amp;1\\ \end{bmatrix}\)<td>s<sub>x</sub>는 x축에서의 스케일링 인자를, <br />s<sub>y</sub>는 y축에서의 스케일링 인자를 나타냄.<tr><td style="text-align: center">회전<td style="text-align: center"><img data-src="https://raw.githubusercontent.com/Hansolkkim/Image-Upload/forUpload/img/202211021350772.jpg" alt="SS2022-11-02PM01.50.39" width="70%;" data-proofer-ignore><td>\(\begin{bmatrix}cos(a)&amp;sin(a)&amp;0\\-sin(a)&amp;cos(a)&amp;0\\0&amp;0&amp;1\\ \end{bmatrix}\)<td>a는 회전 각도를 나타냄.</table></div><p>위에서 주어진 <strong><u>변환 행렬</u></strong>을 이용해 기존의 점, 직선, 평면을 계산하게 됩니다.</p><p>기존의 점을 $(x, y, 1)$, 아핀 변환 중 2배 스케일링 변환된 점을 $(x’, y’, 1)$이라고 할 때, $(x’, y’, 1)$은 아래의 수식으로 구할 수 있습니다.</p>\[(x', y', 1) = (x, y, 1) \times \begin{bmatrix}2&amp;0&amp;0\\0&amp;2&amp;0\\0&amp;0&amp;1\end{bmatrix} \\ x' = 2x, \;\;\;y' = 2y\]<h2 id="cgaffinetransform"><span class="mr-2">CGAffineTransform?</span><a href="#cgaffinetransform" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Swift에서는 위의 아핀 변환을 <code class="language-plaintext highlighter-rouge">CGAffineTransform</code>이라는 Struct를 이용해 제공해줍니다.</p><p>위에서 알아봤던 변환 행렬을 알 필요 없이 CGAffineTransform 구조체는 초기화 생성자를 이용해 아핀 변환 후 매핑될 좌표를 모두 계산합니다.</p><p><img data-src="https://raw.githubusercontent.com/Hansolkkim/Image-Upload/forUpload/img/202211041157829.jpg" alt="SS2022-11-04AM11.57.32" data-proofer-ignore></p><p>CGAffineTransform 구조체의 초기화 생성자는 위와 같습니다.</p><p>초기화 생성자로 아핀 변환 중 rotate, scale, translate 변환을 제공해주는 것을 확인할 수 있습니다.</p><p>또한 맨 아래 2개의 초기화 생성자를 통해 직접 변환 행렬을 정의해주는 아핀 변환도 가능합니다. 해당 초기화 생성자들의 매개변수는 아래의 변환 행렬을 기준으로 한 매개변수 입니다.</p>\[\begin{bmatrix}a&amp;c&amp;0\\c&amp;d&amp;0\\t_x&amp;t_y&amp;1\ \end{bmatrix}\]<ol><li><p><code class="language-plaintext highlighter-rouge">init(rotationAngle:)</code> 초기화 생성자 사용 예시</p><p><img data-src="https://raw.githubusercontent.com/Hansolkkim/Image-Upload/forUpload/img/202211041350575.gif" alt="SS2022-11-04PM01.50.25" width="50%;" data-proofer-ignore></p><p><code class="language-plaintext highlighter-rouge">init(rotationAngle: CGFloat)</code> 초기화 생성자의 경우, 매개변수에 회전하고자 하는 <u>회전 각</u>을 넣어주면 됩니다. (제 경우에는 <code class="language-plaintext highlighter-rouge">.pi</code>, <code class="language-plaintext highlighter-rouge">.pi/4</code> 등과 같은 값을 넣으면 나중에 알아보기 편했습니다.)</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">rotateButtonDidTap</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">didRotate</span> <span class="p">{</span>
         <span class="kt">UIView</span><span class="o">.</span><span class="nf">animate</span><span class="p">(</span><span class="nv">withDuration</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">targetView</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="kt">CGAffineTransform</span><span class="p">(</span><span class="nv">rotationAngle</span><span class="p">:</span> <span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
        <span class="p">}</span> <span class="nv">completion</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="n">_</span> <span class="k">in</span>
            <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="n">didRotate</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="kt">UIView</span><span class="o">.</span><span class="nf">animate</span><span class="p">(</span><span class="nv">withDuration</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">targetView</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="o">.</span><span class="n">identity</span>
        <span class="p">}</span> <span class="nv">completion</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="n">_</span> <span class="k">in</span>
            <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="n">didRotate</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><li><p><code class="language-plaintext highlighter-rouge">init(scaleX:y:)</code> 초기화 생성자 사용 예시</p><p><img data-src="https://raw.githubusercontent.com/Hansolkkim/Image-Upload/forUpload/img/202211041354019.gif" alt="SS2022-11-04PM01.53.52" width="50%;" data-proofer-ignore></p><p><code class="language-plaintext highlighter-rouge">init(scaleX: CGFloat, y: CGFloat)</code> 초기화 생성자의 경우, 매개변수에 변환하고자 하는 배율을 넣어주면 됩니다.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">scaleButtonDidTap</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">didScale</span> <span class="p">{</span>
        <span class="kt">UIView</span><span class="o">.</span><span class="nf">animate</span><span class="p">(</span><span class="nv">withDuration</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">targetView</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="kt">CGAffineTransform</span><span class="p">(</span><span class="nv">scaleX</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">)</span>
        <span class="p">}</span> <span class="nv">completion</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="n">_</span> <span class="k">in</span>
            <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="n">didScale</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="kt">UIView</span><span class="o">.</span><span class="nf">animate</span><span class="p">(</span><span class="nv">withDuration</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">targetView</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="o">.</span><span class="n">identity</span>
        <span class="p">}</span> <span class="nv">completion</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="n">_</span> <span class="k">in</span>
            <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="n">didScale</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><li><p><code class="language-plaintext highlighter-rouge">init(translationX:y:)</code> 초기화 생성자 사용 예시</p><p><img data-src="https://raw.githubusercontent.com/Hansolkkim/Image-Upload/forUpload/img/202211041358357.gif" alt="SS2022-11-04PM01.56.53" width="50%;" data-proofer-ignore></p><p><code class="language-plaintext highlighter-rouge">init(translationX: CGFloat, y: CGFloat)</code> 초기화 생성자의 경우, 매개변수에 x, y 축 방향으로 이동하고자 하는 변위만큼의 값을 넣으면 됩니다.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">translateButtonDidTap</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">didTranslate</span> <span class="p">{</span>
        <span class="kt">UIView</span><span class="o">.</span><span class="nf">animate</span><span class="p">(</span><span class="nv">withDuration</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">targetView</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="kt">CGAffineTransform</span><span class="p">(</span><span class="nv">translationX</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="mi">40</span><span class="p">)</span>
        <span class="p">}</span> <span class="nv">completion</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="n">_</span> <span class="k">in</span>
            <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="n">didTranslate</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="kt">UIView</span><span class="o">.</span><span class="nf">animate</span><span class="p">(</span><span class="nv">withDuration</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">targetView</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="o">.</span><span class="n">identity</span>
        <span class="p">}</span> <span class="nv">completion</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="n">_</span> <span class="k">in</span>
            <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="n">didTranslate</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div></ol><p><img data-src="https://raw.githubusercontent.com/Hansolkkim/Image-Upload/forUpload/img/202211041203600.jpg" alt="SS2022-11-04PM12.03.47" data-proofer-ignore></p><p>또한 CGAffineTransform 구조체가 제공해주는 타입 프로퍼티에는 <code class="language-plaintext highlighter-rouge">identity</code>가 있습니다.</p><p>해당 프로퍼티는 아핀 변환 이전의 형태로 다시 돌아갈 때 사용하는 프로퍼티입니다. 아래와 같이 사용하면 아핀 변환된 View가 다시 이전의 상태로 돌아갑니다.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kt">UIView</span><span class="o">.</span><span class="nf">animte</span><span class="p">(</span><span class="nv">withDuration</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="kt">View</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="o">.</span><span class="n">identity</span>
<span class="p">}</span>
</pre></table></code></div></div><p><img data-src="https://raw.githubusercontent.com/Hansolkkim/Image-Upload/forUpload/img/202211041419258.jpg" alt="SS2022-11-04PM02.19.38" data-proofer-ignore></p><p>CGAffineTransform 구조체가 제공해주는 인스턴스 메소드는 위와 같습니다.</p><p><code class="language-plaintext highlighter-rouge">concatenating(_:)</code> 는 <u>여러 CGAffineTransform의 변환 행렬들을 곱</u>하여 새로운 변환 행렬을 가지는 CGAffineTransform을 만들어주는 메소드입니다.</p><p><strong>행렬의 곱셈</strong>은 교환 법칙이 성립하지 않습니다. 따라서 <code class="language-plaintext highlighter-rouge">concatenating(_:)</code> 메소드를 이용하여 새로운 변환 행렬을 만들고자 할 때는 CGAffineTransform 객체들의 순서를 생각하여야 합니다.</p><h3 id="참고-자료"><span class="mr-2">참고 자료</span><a href="#참고-자료" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://developer.apple.com/documentation/corefoundation/cgaffinetransform">[Apple-Developer-CGAffineTransform]</a></p><p><a href="https://kr.mathworks.com/discovery/affine-transformation.html">[MathWorks-Affine Transform]</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/ios/'>iOS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ios/" class="post-tag no-text-decoration" >iOS</a> <a href="/tags/cgaffinetransform/" class="post-tag no-text-decoration" >CGAffineTransform</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=CGAffineTransform%EC%97%90+%EB%8C%80%ED%95%B4+-+SoliOS&url=%2Fposts%2FCGAffineTransform%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=CGAffineTransform%EC%97%90+%EB%8C%80%ED%95%B4+-+SoliOS&u=%2Fposts%2FCGAffineTransform%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2FCGAffineTransform%2F&text=CGAffineTransform%EC%97%90+%EB%8C%80%ED%95%B4+-+SoliOS" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="Hansolkkim/Hansolkkim.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Coordinator/">Coordinator Pattern</a><li><a href="/posts/CGAffineTransform/">CGAffineTransform에 대해</a><li><a href="/posts/CollectionViewInCollectionView-1/">CollectionView 안에 CollectionView 넣기 - (1)</a><li><a href="/posts/ViewLayout/">iOS의 Layout</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ios/">iOS</a> <a class="post-tag" href="/tags/collectionview/">CollectionView</a> <a class="post-tag" href="/tags/dynamic/">dynamic</a> <a class="post-tag" href="/tags/cgaffinetransform/">CGAffineTransform</a> <a class="post-tag" href="/tags/coordinator-pattern/">Coordinator Pattern</a> <a class="post-tag" href="/tags/design-pattern/">Design Pattern</a> <a class="post-tag" href="/tags/layout/">Layout</a> <a class="post-tag" href="/tags/roundedlabel/">roundedLabel</a> <a class="post-tag" href="/tags/string-size/">String.size</a> <a class="post-tag" href="/tags/uicollectionview/">UICollectionView</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/CollectionViewInCollectionView-1/"><div class="card-body"> <em class="small" data-ts="1656333480" data-df="ll" > Jun 27, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CollectionView 안에 CollectionView 넣기 - (1)</h3><div class="text-muted small"><p> 1. 계기 코드스쿼드 마지막 팀 프로젝트인 Issue Tracker를 진행하다가, CollectionView(Issue Cell)안에 CollectionView(Label Cell)이 있으면 편하게 구현할 수 있겠다고 생각했습니다. 하지만 편할 것이라는 생각과는 다르게, 처음 해보다보니 이 두 CollectionVIew의 DataSource를 관리...</p></div></div></a></div><div class="card"> <a href="/posts/CollectionViewInCollectionView-2/"><div class="card-body"> <em class="small" data-ts="1656338640" data-df="ll" > Jun 27, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CollectionView 안에 CollectionView 넣기 - (2)</h3><div class="text-muted small"><p> (앞서 작성했던 1편에 이어 작성되었습니다.) 4. 문제 해결 3. IssueCollectionCell의 dynamic height 하지만, Issue들 중에 Label을 가지지 않은 Issue들도 있을텐데, 이런 Issue들의 Cell의 높이는 작아져야 하지 않을까? 하는 생각에서 3번째 문제 해결을 해보고자 합니다! 현재 상황에서, Labe...</p></div></div></a></div><div class="card"> <a href="/posts/ViewLayout/"><div class="card-body"> <em class="small" data-ts="1656592980" data-df="ll" > Jun 30, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>iOS의 Layout</h3><div class="text-muted small"><p> 계기 UITableView는 Cell의 Subview들의 Constraints만 잘 잡아주면 Cell의 높이가 동적으로 설정되는 기능을 이용하려 했습니다. 그런데 아무리해도 Cell의 높이는 45 point로 그대로였고, 이거 떄문에 2시간동안 Constraints만 엄청 수정했습니다.. 포기하고 자려고 하다가, 자기 직전에 요즘 버릇인 UIVi...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Coordinator/" class="btn btn-outline-primary" prompt="Older"><p>Coordinator Pattern</p></a> <a href="/posts/UICollectionView/" class="btn btn-outline-primary" prompt="Newer"><p>UICollectionView Guide</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="">Sol</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ios/">iOS</a> <a class="post-tag" href="/tags/collectionview/">CollectionView</a> <a class="post-tag" href="/tags/dynamic/">dynamic</a> <a class="post-tag" href="/tags/cgaffinetransform/">CGAffineTransform</a> <a class="post-tag" href="/tags/coordinator-pattern/">Coordinator Pattern</a> <a class="post-tag" href="/tags/design-pattern/">Design Pattern</a> <a class="post-tag" href="/tags/layout/">Layout</a> <a class="post-tag" href="/tags/roundedlabel/">roundedLabel</a> <a class="post-tag" href="/tags/string-size/">String.size</a> <a class="post-tag" href="/tags/uicollectionview/">UICollectionView</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
