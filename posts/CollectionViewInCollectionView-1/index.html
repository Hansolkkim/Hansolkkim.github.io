<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="CollectionView 안에 CollectionView 넣기 - (1)" /><meta property="og:locale" content="ko" /><meta name="description" content="1. 계기" /><meta property="og:description" content="1. 계기" /><link rel="canonical" href="/posts/CollectionViewInCollectionView-1/" /><meta property="og:url" content="/posts/CollectionViewInCollectionView-1/" /><meta property="og:site_name" content="SoliOS" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-06-27T21:38:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="CollectionView 안에 CollectionView 넣기 - (1)" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="nvd2iqjDnkZKbkhCEZILzHaLouk7d4p92EArPFodwzo" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-30T21:52:16+09:00","datePublished":"2022-06-27T21:38:00+09:00","description":"1. 계기","headline":"CollectionView 안에 CollectionView 넣기 - (1)","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/CollectionViewInCollectionView-1/"},"url":"/posts/CollectionViewInCollectionView-1/"}</script><title>CollectionView 안에 CollectionView 넣기 - (1) | SoliOS</title><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://user-images.githubusercontent.com/92504186/175757408-12d2c887-5ba2-4c28-8f9c-80612bb6dbf4.JPEG" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">SoliOS</a></div><div class="site-subtitle font-italic">iOS 개발자를 꿈꿉니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Hansolkkim" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hskim6521','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>CollectionView 안에 CollectionView 넣기 - (1)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>CollectionView 안에 CollectionView 넣기 - (1)</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1656333480" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 27, 2022 </em> </span> <span> Updated <em class="" data-ts="1656593536" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 30, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> Sol </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1333 words"> <em>7 min</em> read</span></div></div></div><div class="post-content"><h2 id="1-계기"><span class="mr-2">1. 계기</span><a href="#1-계기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>코드스쿼드 마지막 팀 프로젝트인 <code class="language-plaintext highlighter-rouge">Issue Tracker</code>를 진행하다가, CollectionView(Issue Cell)안에 CollectionView(Label Cell)이 있으면 편하게 구현할 수 있겠다고 생각했습니다.</p><p>하지만 편할 것이라는 생각과는 다르게, 처음 해보다보니 이 두 CollectionVIew의 DataSource를 관리하는데서 부터 애를 먹기 시작했습니다.</p><p>이전에 <code class="language-plaintext highlighter-rouge">Side Dish</code>같은 프로젝트를 진행할 때에도 <code class="language-plaintext highlighter-rouge">왜 CollectionView가 아닌 ScrollView를 사용하려고 하냐</code>는 코드 리뷰를 받았는데, 할 줄 모른다는 핑계를 대신해서 프로젝트 요구사항 을 들먹였던 기억이 떠올라, 이번에는 확실히 짚고 넘어가자고 생각해 정리하려고 합니다.</p><h2 id="2-모델링"><span class="mr-2">2. 모델링</span><a href="#2-모델링" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><img data-src="../../assets/img/SS%202022-06-27%20PM%2008.53.06.jpg" alt="SS 2022-06-27 PM 08.53.06" width="50%;" data-proofer-ignore></p><p>구현해 볼 내용을 간단하게 모델링한 내용은 위와 같습니다. <strong>Issue</strong>에 해당하는 IssueCollectionView의 Cell 내에 해당 Issue에 속해 있는 <strong>Label</strong>들을 보여줄 LabelCollectionView가 있는 형태입니다.</p><p>여기서 사용할 타입은 아래와 같이 정의했습니다.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">Issue</span> <span class="p">{</span>
	<span class="k">let</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">labels</span><span class="p">:</span> <span class="p">[</span><span class="kt">Label</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">Label</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">backgroundColor</span><span class="p">:</span> <span class="kt">UIColor</span>
<span class="p">}</span>
</pre></table></code></div></div><p>IssueCollectionCell에서 사용할 타입은 Issue이고, 이 셀에는 CollectionView가 존재하므로, 해당 CollectionView에서 사용할 데이터(<strong>[Label]</strong>)까지 한 번에 받는 것이 핵심입니다.</p><h2 id="3-구현"><span class="mr-2">3. 구현</span><a href="#3-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="1-labelcollectioncell"><span class="mr-2">1. LabelCollectionCell</span><a href="#1-labelcollectioncell" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="c1">//  LabelCollectionCell.swift</span>

<span class="kd">import</span> <span class="kt">SnapKit</span>
<span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">final</span> <span class="kd">class</span> <span class="kt">LabelCollectionCell</span><span class="p">:</span> <span class="kt">UICollectionViewCell</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">identifier</span> <span class="o">=</span> <span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="kt">LabelCollectionCell</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>

    <span class="kd">private</span> <span class="k">let</span> <span class="nv">labelLabel</span><span class="p">:</span> <span class="kt">PaddingLabel</span> <span class="o">=</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">label</span> <span class="o">=</span> <span class="kt">PaddingLabel</span><span class="p">()</span>
        <span class="n">label</span><span class="o">.</span><span class="nf">setEdgeInset</span><span class="p">(</span><span class="nv">top</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nv">bottom</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nv">left</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="nv">right</span><span class="p">:</span> <span class="mi">16</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">translatesAutoresizingMaskIntoConstraints</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="k">return</span> <span class="n">label</span>
    <span class="p">}()</span>

    <span class="k">override</span> <span class="nf">init</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">CGRect</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="n">frame</span><span class="p">)</span>
        <span class="nf">addSubview</span><span class="p">(</span><span class="n">labelLabel</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">@available</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">unavailable</span><span class="p">)</span>
    <span class="kd">required</span> <span class="nf">init</span><span class="p">?(</span><span class="nv">coder</span><span class="p">:</span> <span class="kt">NSCoder</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">fatalError</span><span class="p">(</span><span class="s">"init(coder:) has not been implemented"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">configure</span><span class="p">(</span><span class="n">with</span> <span class="nv">label</span><span class="p">:</span> <span class="kt">Label</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">labelLabel</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">title</span>
        <span class="n">labelLabel</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">backgroundColor</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">layoutSubviews</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">layoutSubviews</span><span class="p">()</span>
        <span class="n">labelLabel</span><span class="o">.</span><span class="n">snp</span><span class="o">.</span><span class="n">makeConstraints</span> <span class="p">{</span> <span class="n">make</span> <span class="k">in</span>
            <span class="n">make</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="nf">equalTo</span><span class="p">(</span><span class="k">self</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="2-issuecollectioncell"><span class="mr-2">2. IssueCollectionCell</span><a href="#2-issuecollectioncell" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>이 Cell에서 LabelCollectionView를 갖고 있게 하기 위해, LabelCollectionViewController를 갖고 있습니다.</p><p>LabelCollectionView만 가지고 있을 경우, LabelCollectionView에 대한 DataSource, Delegate 모두 해당 Cell에서 담당하게 되는 어색한 상황이 발생했기 때문입니다.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre><td class="rouge-code"><pre><span class="c1">//  IssueCollectionCell.swift</span>

<span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">SnapKit</span>

<span class="kd">final</span> <span class="kd">class</span> <span class="kt">IssueCollectionCell</span><span class="p">:</span> <span class="kt">UICollectionViewCell</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">identifier</span> <span class="o">=</span> <span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="kt">IssueCollectionCell</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>

    <span class="k">let</span> <span class="nv">contentsStackView</span><span class="p">:</span> <span class="kt">UIStackView</span> <span class="o">=</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">stackView</span> <span class="o">=</span> <span class="kt">UIStackView</span><span class="p">()</span>
        <span class="n">stackView</span><span class="o">.</span><span class="n">translatesAutoresizingMaskIntoConstraints</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="n">stackView</span><span class="o">.</span><span class="n">axis</span> <span class="o">=</span> <span class="o">.</span><span class="n">vertical</span>
        <span class="n">stackView</span><span class="o">.</span><span class="n">spacing</span> <span class="o">=</span> <span class="mi">15</span>
        <span class="k">return</span> <span class="n">stackView</span>
    <span class="p">}()</span>

    <span class="kd">private</span> <span class="k">let</span> <span class="nv">titleLabel</span><span class="p">:</span> <span class="kt">UILabel</span> <span class="o">=</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">label</span> <span class="o">=</span> <span class="kt">UILabel</span><span class="p">()</span>
        <span class="n">label</span><span class="o">.</span><span class="n">numberOfLines</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">label</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="o">.</span><span class="nf">systemFont</span><span class="p">(</span><span class="nv">ofSize</span><span class="p">:</span> <span class="mi">22</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">translatesAutoresizingMaskIntoConstraints</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="n">label</span><span class="o">.</span><span class="n">adjustsFontSizeToFitWidth</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="k">return</span> <span class="n">label</span>
    <span class="p">}()</span>

    <span class="kd">private</span> <span class="k">let</span> <span class="nv">labelCollectionViewController</span> <span class="o">=</span> <span class="kt">LabelCollectionViewController</span><span class="p">()</span>

    <span class="kd">private</span> <span class="k">var</span> <span class="nv">data</span> <span class="o">=</span> <span class="p">[</span><span class="kt">Label</span><span class="p">]()</span>

    <span class="k">override</span> <span class="nf">init</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">CGRect</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="n">frame</span><span class="p">)</span>
        <span class="nf">addSubview</span><span class="p">(</span><span class="n">contentsStackView</span><span class="p">)</span>
        <span class="n">contentsStackView</span><span class="o">.</span><span class="nf">addArrangedSubview</span><span class="p">(</span><span class="n">titleLabel</span><span class="p">)</span>
        <span class="n">contentStackView</span><span class="o">.</span><span class="nf">addArracgedSubview</span><span class="p">(</span><span class="n">labelCollectionViewController</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
        <span class="n">clipsToBounds</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="p">}</span>

    <span class="kd">@available</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">unavailable</span><span class="p">)</span>
    <span class="kd">required</span> <span class="nf">init</span><span class="p">?(</span><span class="nv">coder</span><span class="p">:</span> <span class="kt">NSCoder</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">fatalError</span><span class="p">(</span><span class="s">"init(coder:) has not been implemented"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">configure</span><span class="p">(</span><span class="n">with</span> <span class="nv">issue</span><span class="p">:</span> <span class="kt">Issue</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">titleLabel</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">issue</span><span class="o">.</span><span class="n">title</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">issue</span><span class="o">.</span><span class="n">labels</span>
        <span class="n">contentsStackView</span><span class="o">.</span><span class="nf">addArrangedSubview</span><span class="p">(</span><span class="n">labelCollectionViewController</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
        <span class="nf">configureLabels</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">issue</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">layoutSubviews</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">contentsStackView</span><span class="o">.</span><span class="n">snp</span><span class="o">.</span><span class="n">makeConstraints</span> <span class="p">{</span> <span class="n">make</span> <span class="k">in</span>
            <span class="n">make</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">bottom</span><span class="o">.</span><span class="nf">equalTo</span><span class="p">(</span><span class="k">self</span><span class="p">)</span>
            <span class="n">make</span><span class="o">.</span><span class="n">width</span><span class="o">.</span><span class="nf">equalTo</span><span class="p">(</span><span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.8</span><span class="p">)</span>
            <span class="n">make</span><span class="o">.</span><span class="n">centerX</span><span class="o">.</span><span class="nf">equalTo</span><span class="p">(</span><span class="k">self</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="4-문제-해결"><span class="mr-2">4. 문제 해결</span><a href="#4-문제-해결" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="1-labelcollectioncell의-간격-문제"><span class="mr-2">1. LabelCollectionCell의 간격 문제</span><a href="#1-labelcollectioncell의-간격-문제" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><code class="language-plaintext highlighter-rouge">LabelCollectionView</code>를 초기화할 때 <code class="language-plaintext highlighter-rouge">UICollectionViewFlowLayout</code>을 설정해주면서 <code class="language-plaintext highlighter-rouge">UICollectionViewFlowLayout.minimumLineSpacing = 10</code>과 같이 설정을 해주었기 때문에 Cell간 간격이 지정될 것이라고 생각했지만, 제가 원하는 간격이 지정되지 않는 문제가 발생했습니다..🚨</p><div class="table-wrapper"><table><thead><tr><th>minimumLineSpacing = 10<th>minimumLineSpacing = 100<tbody><tr><td><img data-src="../../assets/img/175863701-5986c11f-0bf2-4a95-bff6-12b2165338a1.jpg" alt="SS 2022-06-27 PM 02 03 17" width="40%;" data-proofer-ignore><td><img data-src="../../assets/img/175863760-09c7c031-a17d-4012-85c9-ba7d058508c9.jpg" alt="SS 2022-06-27 PM 02 03 56" width="40%;" data-proofer-ignore></table></div><p>minimumLineSpacing 속성을 바꾸어주어도, Cell간 간격에는 달라지는 점이 없었습니다,,</p><p>여기서 찾은 첫번째 문제는, horizontal 방향으로 스크롤되는 CollectionView의 경우, 셀 간격을 조정하기 위해서는 <del>minimumLineSpacing</del>이 아니라, <code class="language-plaintext highlighter-rouge">minimumInteritemSpacing</code> 을 설정해주어야 한다는 것입니다.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="c1">// final class LabelCollectionView: UICollectionView</span>
<span class="kd">convenience</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">flowLayout</span> <span class="o">=</span> <span class="kt">UICollectionViewFlowLayout</span><span class="p">()</span>
    <span class="n">flowLayout</span><span class="o">.</span><span class="n">minimumInteritemSpacing</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="o">.</span><span class="n">zero</span><span class="p">,</span> <span class="nv">collectionViewLayout</span><span class="p">:</span> <span class="n">flowLayout</span><span class="p">)</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></table></code></div></div><p>작성했던 LabelCollectionView의 설정 값들 중, 위에서 말한 값을 수정해주었더니 아래와 같이 화면이 변경되었습니다!</p><p><img data-src="https://user-images.githubusercontent.com/92504186/175878961-412f601c-5b86-45cc-95af-a95972bbf519.jpg" alt="SS 2022-06-27 PM 04 01 08" width="40%;" data-proofer-ignore></p><h3 id="2-labelcollectioncell의-dynamic-width"><span class="mr-2">2. LabelCollectionCell의 dynamic width</span><a href="#2-labelcollectioncell의-dynamic-width" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>이제, LabelCollectionCell의 width를 글자의 길이에 맞게 dynamic하게 설정하는 과정이 필요합니다.</p><p>Cell의 Layout을 설정하는 객체는 UICollectionViewDelegate, 여기서 UICollectionViewFlowLayout을 이용하면 된다고 판단했습니다.</p><p>해당 객체의 <code class="language-plaintext highlighter-rouge">collectionView(_: layout: sizeForItemAt:) -&gt; CGSize</code> 메소드를 이용해 Cell의 크기를 지정해줄 수 있습니다.</p><p>그럼 아직 들어오지 않은 String 값의 <strong>width</strong>를 어떻게 알 수 있을까요?</p><p><code class="language-plaintext highlighter-rouge">String.size(withAttribute:)</code> 메소드를 이용해 알 수 있었습니다.</p><p>String이 들어갈 UI(저는 UILabel의 길이를 구하려고 합니다.)에서 사용하는 Font 속성을 사용해 width를 아래와 같이 구할 수 있습니다.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kt">String</span><span class="o">.</span><span class="nf">size</span><span class="p">(</span><span class="nv">withAttribute</span><span class="p">:</span> <span class="p">[</span><span class="kt">NSAttributedString</span><span class="o">.</span><span class="kt">Key</span><span class="o">.</span><span class="nv">font</span><span class="p">:</span> <span class="o">.</span><span class="nf">systemFont</span><span class="p">(</span><span class="nv">ofSize</span><span class="p">:</span> <span class="mi">17</span><span class="p">)])</span>
</pre></table></code></div></div><p>위 코드를 이용해 UICollectionViewDelegateFlowLayout 객체를 완성했습니다.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kd">extension</span> <span class="kt">IssueCollectionCell</span><span class="p">:</span> <span class="kt">UICollectionViewDelegateFlowLayout</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">collectionView</span><span class="p">(</span><span class="n">_</span> <span class="nv">collectionView</span><span class="p">:</span> <span class="kt">UICollectionView</span><span class="p">,</span> <span class="n">layout</span> <span class="nv">collectionViewLayout</span><span class="p">:</span> <span class="kt">UICollectionViewLayout</span><span class="p">,</span> <span class="n">sizeForItemAt</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">CGSize</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">CGSize</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="n">indexPath</span><span class="o">.</span><span class="n">item</span><span class="p">]</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="nf">size</span><span class="p">(</span><span class="nv">withAttributes</span><span class="p">:</span> <span class="p">[</span><span class="kt">NSAttributedString</span><span class="o">.</span><span class="kt">Key</span><span class="o">.</span><span class="nv">font</span><span class="p">:</span> <span class="kt">UIFont</span><span class="o">.</span><span class="nf">systemFont</span><span class="p">(</span><span class="nv">ofSize</span><span class="p">:</span> <span class="mi">17</span><span class="p">)])</span><span class="o">.</span><span class="n">width</span> <span class="o">+</span> <span class="mi">32</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">50</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>이제 원하는 화면이 나오는 것을 확인할 수 있었습니다!</p><p><img data-src="https://user-images.githubusercontent.com/92504186/175881142-36801969-b0d8-47a1-8f92-c8fe449c9f93.jpg" alt="SS 2022-06-27 PM 04 14 04" width="40%;" data-proofer-ignore></p><hr /><p>(길이가 너무 길어져, <a href="https://hansolkkim.github.io/posts/CollectionViewInCollectionView-2">2편</a>에서 마저 작성하겠습니다! 2편에는 CollectionView Dynamic Height를 중점으로 작성합니다.)</p><h2 id="5-참고-자료"><span class="mr-2">5. 참고 자료</span><a href="#5-참고-자료" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://stackoverflow.com/questions/23134986/dynamic-cell-width-of-uicollectionview-depending-on-label-width">[StackOerflow-Dynamic cell width of UICollectionView depending on label width]</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/ios/'>iOS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ios/" class="post-tag no-text-decoration" >iOS</a> <a href="/tags/collectionview/" class="post-tag no-text-decoration" >CollectionView</a> <a href="/tags/dynamic/" class="post-tag no-text-decoration" >dynamic</a> <a href="/tags/string-size/" class="post-tag no-text-decoration" >String.size</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=CollectionView+%EC%95%88%EC%97%90+CollectionView+%EB%84%A3%EA%B8%B0+-+%281%29+-+SoliOS&url=%2Fposts%2FCollectionViewInCollectionView-1%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=CollectionView+%EC%95%88%EC%97%90+CollectionView+%EB%84%A3%EA%B8%B0+-+%281%29+-+SoliOS&u=%2Fposts%2FCollectionViewInCollectionView-1%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2FCollectionViewInCollectionView-1%2F&text=CollectionView+%EC%95%88%EC%97%90+CollectionView+%EB%84%A3%EA%B8%B0+-+%281%29+-+SoliOS" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="Hansolkkim/Hansolkkim.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Coordinator/">Coordinator Pattern</a><li><a href="/posts/CGAffineTransform/">CGAffineTransform에 대해</a><li><a href="/posts/CollectionViewInCollectionView-1/">CollectionView 안에 CollectionView 넣기 - (1)</a><li><a href="/posts/ViewLayout/">iOS의 Layout</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ios/">iOS</a> <a class="post-tag" href="/tags/collectionview/">CollectionView</a> <a class="post-tag" href="/tags/dynamic/">dynamic</a> <a class="post-tag" href="/tags/cgaffinetransform/">CGAffineTransform</a> <a class="post-tag" href="/tags/coordinator-pattern/">Coordinator Pattern</a> <a class="post-tag" href="/tags/design-pattern/">Design Pattern</a> <a class="post-tag" href="/tags/layout/">Layout</a> <a class="post-tag" href="/tags/roundedlabel/">roundedLabel</a> <a class="post-tag" href="/tags/string-size/">String.size</a> <a class="post-tag" href="/tags/uicollectionview/">UICollectionView</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/CollectionViewInCollectionView-2/"><div class="card-body"> <em class="small" data-ts="1656338640" data-df="ll" > Jun 27, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CollectionView 안에 CollectionView 넣기 - (2)</h3><div class="text-muted small"><p> (앞서 작성했던 1편에 이어 작성되었습니다.) 4. 문제 해결 3. IssueCollectionCell의 dynamic height 하지만, Issue들 중에 Label을 가지지 않은 Issue들도 있을텐데, 이런 Issue들의 Cell의 높이는 작아져야 하지 않을까? 하는 생각에서 3번째 문제 해결을 해보고자 합니다! 현재 상황에서, Labe...</p></div></div></a></div><div class="card"> <a href="/posts/ViewLayout/"><div class="card-body"> <em class="small" data-ts="1656592980" data-df="ll" > Jun 30, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>iOS의 Layout</h3><div class="text-muted small"><p> 계기 UITableView는 Cell의 Subview들의 Constraints만 잘 잡아주면 Cell의 높이가 동적으로 설정되는 기능을 이용하려 했습니다. 그런데 아무리해도 Cell의 높이는 45 point로 그대로였고, 이거 떄문에 2시간동안 Constraints만 엄청 수정했습니다.. 포기하고 자려고 하다가, 자기 직전에 요즘 버릇인 UIVi...</p></div></div></a></div><div class="card"> <a href="/posts/Coordinator/"><div class="card-body"> <em class="small" data-ts="1658713390" data-df="ll" > Jul 25, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Coordinator Pattern</h3><div class="text-muted small"><p> 계기 토이 프로젝트를 진행하면서, 보다 가벼운 ViewController를 만들 필요성을 느껴 Coordinator Pattern을 적용해보고, 이를 정리하기 위해 포스팅을 작성합니다. Coordinator Pattern? Coordinator Pattern은 Soroush Khanlou가 2015년에 The Coordinator라는 글을 쓰...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"><div class="btn btn-outline-primary disabled" prompt="Older"><p>-</p></div><a href="/posts/CollectionViewInCollectionView-2/" class="btn btn-outline-primary" prompt="Newer"><p>CollectionView 안에 CollectionView 넣기 - (2)</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="">Sol</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ios/">iOS</a> <a class="post-tag" href="/tags/collectionview/">CollectionView</a> <a class="post-tag" href="/tags/dynamic/">dynamic</a> <a class="post-tag" href="/tags/cgaffinetransform/">CGAffineTransform</a> <a class="post-tag" href="/tags/coordinator-pattern/">Coordinator Pattern</a> <a class="post-tag" href="/tags/design-pattern/">Design Pattern</a> <a class="post-tag" href="/tags/layout/">Layout</a> <a class="post-tag" href="/tags/roundedlabel/">roundedLabel</a> <a class="post-tag" href="/tags/string-size/">String.size</a> <a class="post-tag" href="/tags/uicollectionview/">UICollectionView</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
